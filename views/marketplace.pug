//- extends base_account 
DOCTYPE
html(lang="en")

head
    meta(charset="UTF-8")
    meta(http-equiv="X-UA-Compatible" content="IE=edge")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")

    link(rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer")
    link(rel="icon" href="../asset/img/favicon.png" type="image/png")


    //- STYLES 
    link(rel="stylesheet" href="/src/css/general.css")
    link(rel="stylesheet" href="/src/css/dashboard.css")
    link(rel="stylesheet" href="/src/css/chat.css")
    link(rel="stylesheet" href="/src/css/query_dashboard.css")

    script(src="/socket.io/socket.io.js")
    //- script(defer src="/src/js/chat.js")
    script(defer src="/src/js/productSearch.js")


    title=title
body
    #spinOverlay
        .spin
            div
            div
            div
            div
            div
            div
            div
            div
            div
            div
    section.section__dashboard
        .section__top.margin__left--sm
            //- a(href='/dashboard')
            img.logo(src='asset/img/logo-removebg.png' alt='clubmerce logo')
            //- a(href='/dashboard')
            img.logo-small(src='asset/img/favicon.png' alt='clubmerce logo')
            nav.navbar
                form.nav__search
                    input.nav__input(type='search' placeholder='search...')
                    button.search__button(type='submit')
                        i.fa-solid.fa-magnifying-glass.icon.nav__icon
                    #search-result


                span.nav__icons
                    span
                        .nav__image--box
                            img.nav__image(src=`/asset/img/users/${user.image}` alt=`user's photo`)
                        //- profile...
                        .Profile__hovered.hidden
                            .profile__content
                                .profile__owner
                                    .profile__image--box
                                        img.profile__image(src=`/asset/img/users/${user.image}` alt=`user's photo`)
                                    p.profile__name= user.fullName
                                a.profile__link.nav__link(href="/profile") My profile
                                button.profile__button.nav__link.nav__logout signout&nbsp;
                                    i.fa-solid.fa-arrow-right-to-bracket.profile__icon


    
        main.main__dashboard
            .dashboard__content
                h3.dashboard__heading
                    a.go-back(href="/dashboard") 
                        i.fa-solid.fa-arrow-left.font-size-sm-help.margin__r-help 
                    | Clubmerce marketplace

                span.product__filtering-btn
                    select.select__input(id="select" data-user=`${user.username}`)
                        option(value="all") All
                        option(value="most-promoted") Most promoted
                        option(value="gravity-high-low") Gravity : High-low
                        option(value="commission-high-low") High commission 
                        option(value="gravity-low-high") Gravity : Low-high
                        option(value="physical-product") Physical products
                        option(value="recurring-commission") Recurring commission
                        option(value="commission-low-high") Low commission
                        option(value="digital-product") Digital products
                        option(value="least-promoted") Less promoted
                
                
                .products__container
                    aside.product__filtering
                        form.product__filter.form__item  
                            label.form__label(for="select") Sort results by
                            select.select__input(id="select" data-user=`${user}`)
                                option(value="all") All
                                option(value="most-promoted") Most promoted
                                option(value="gravity-high-low") Gravity : High-low
                                option(value="commission-high-low") High commission 
                                option(value="gravity-low-high") Gravity : Low-high
                                option(value="physical-product") Physical products
                                option(value="recurring-commission") Recurring commission
                                option(value="commission-low-high") Low commission
                                option(value="digital-product") Digital products
                                option(value="least-promoted") Less promoted
                        
                        .product__category
                            p catergories
                                ul.catergory__list
                                    li.category__item(data-item='all') All (#{products.length})
                                    li.category__item(data-item='arts') Arts (#{products.filter(product => product.category === 'arts').length})
                                    li.category__item(data-item='betting') Betting (#{products.filter(product => product.category === 'betting').length})
                                    li.category__item(data-item='books') Books (#{products.filter(product => product.category === 'books').length})
                                    li.category__item(data-item='business') Business (#{products.filter(product => product.category === 'business').length})
                                    li.category__item(data-item='computers') Computers (#{products.filter(product => product.category === 'computers').length})
                                    li.category__item(data-item='cooking') Cooking (#{products.filter(product => product.category === 'cooking').length})
                                    li.category__item(data-item='e-Business-and-e-Marketing') E-Business and E-Marketing (#{products.filter(product => product.category === 'e-Business-and-e-Marketing').length})
                                    li.category__item(data-item='education') Education (#{products.filter(product => product.category === 'education').length})
                                    li.category__item(data-item='entertainment') Entertainment (#{products.filter(product => product.category === 'entertainment').length})
                                    li.category__item(data-item='food-and-Wine') Food and Wine (#{products.filter(product => product.category === 'food-and-Wine').length})
                                    li.category__item(data-item='games') Games (#{products.filter(product => product.category === 'games').length})
                                    li.category__item(data-item='green-products') Green Products (#{products.filter(product => product.category === 'green-products').length})
                                    li.category__item(data-item='health-and-fitness') Health and Fitness (#{products.filter(product => product.category === 'health-and-fitness').length})
                                    li.category__item(data-item='home-and-garden') Home and Garden (#{products.filter(product => product.category === 'home-and-garden').length})
                                    li.category__item(data-item='internet') Internet (#{products.filter(product => product.category === 'internet').length})
                                    li.category__item(data-item='investing') Investing (#{products.filter(product => product.category === 'investing').length})
                                    li.category__item(data-item='jobs') Jobs (#{products.filter(product => product.category === 'jobs').length})
                                    li.category__item(data-item='languages') Languages (#{products.filter(product => product.category === '').length})
                                    li.category__item(data-item='reciepe') Reciepe (#{products.filter(product => product.category === 'languages').length})
                                    li.category__item(data-item='parenting-and-Families') Parenting and Families (#{products.filter(product => product.category === 'parenting-and-Families').length})
                                    li.category__item(data-item='self-Help') Self-Help (#{products.filter(product => product.category === 'self-Help').length})
                                    li.category__item(data-item='sports') Sports (#{products.filter(product => product.category === 'sports').length})

                    span
                        h6.dashboard__subheading Top offers
                        p.figures Total #{products.length}

                        .products__cards--box 
                            each product in products
                                -const id = product.vendor?._id;

                                .product__card(class=`${product.isBoosted ? 'promoted' : ''}`)
                                    .product__side--left    
                                        .side--top
                                            .product__image--container
                                                img.product__image(src=`/asset/img/products/${product.image}` alt=product.name)
                                            .product__heading 
                                                h2.product__title= product.name
                                                span.product__npInfo
                                                    p.product__niche=product.niche
                                                    p &#x7C;
                                                    p.product__price=`₦${product.price.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ',')}`
                                                
                                                button.product__message.person(data-vendor-id=`${id}`)
                                                    i.fa-solid.fa-envelope.icon
                                                    | Chat vendor
                                                .product__content
                                                    h4.product__description=  `${product.summary}...`
                                            
                                        .side--bottom
                                            ul.product__info
                                                li.product__info--item(style=`${product.recurringCommission === false ? 'grid-template-columns: repeat(4, 1fr);' : ''}`) 
                                                    i.fa-solid.product__icon.icon(class=`${product.type !== 'Digital' ? 'fa-truck-fast' : 'fa-file'}`)
                                                    p= `${product.type} Product`
                                                li.product__info--item 
                                                    i.fa-solid.fa-tools.product__icon.icon
                                                    p Affiliate tools
                                                li.product__info--item 
                                                    i.fa-solid.fa-link.product__icon.icon
                                                    p Unique Link
                                                li.product__info--item 
                                                    i.fa-regular.fa-square-check.product__icon.icon
                                                    p Approved
                                                -if(product.recurringCommission)
                                                    li.product__info--item 
                                                        i.fa-solid.fa-rotate.product__icon.icon
                                                        p Recurring
                                                

                                    .product__side--right
                                        span.product__commission
                                            p.commision avg commissions 
                                            span.commission__amount #{product.commissionPercentage}%
                                            p.commission__percent= `₦${product.commissionAmount.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ',')}`
                                        button.btn.product__button.promote(data-productSlug=product.id) Promote
                                        a.product__button.page(target="_blank" href=`/marketplace/${product.slug}`) affiliate page


                                figure.product__card-mobile
                                    .product__side.front(class=`${product.isBoosted ? 'promoted-m' : ''}`)    
                                        .front--top
                                            .product__image--container
                                                img.product__image(src=`/asset/img/products/${product.image}` alt=product.name)
                                            .product__heading 
                                                h2.product__title= product.name
                                                button.produt__message-m.person(data-vendor-id=`${id}`)
                                                    i.fa-solid.fa-envelope.icon.product__icon
                                                    
                                                .product__content
                                                    h4.product__description #{product.summary}...
                                                    a.product__button.page.margin__bottom--xsm(target="_blank" href=`/marketplace/${product.slug}`) affiliate page
                                        .front--bottom
                                            ul.product__info
                                                
                                                li.product__info--item(style=`${product.recurringCommission === false ? 'grid-template-columns: repeat(4, 1fr);' : ''}`)
                                                    i.fa-solid.product__icon.icon(class=`${product.type !== 'Digital' ? 'fa-truck-fast' : 'fa-file'}`)
                                                    p= `${product.type} Product`
                                                li.product__info--item 
                                                    i.fa-solid.fa-tools.product__icon.icon
                                                    p Affiliate tools
                                                li.product__info--item 
                                                    i.fa-solid.fa-link.product__icon.icon
                                                    p Unique Link
                                                li.product__info--item 
                                                    i.fa-regular.fa-square-check.product__icon.icon
                                                    p Approved
                                                -if(product.recurringCommission)
                                                    li.product__info--item 
                                                        i.fa-solid.fa-rotate.product__icon.icon
                                                        p Recurring
                                                
                                                        
                                                

                                    .product__side.back
                                        .link--box
                                            h2.dashboard__heading Generate HopLink
                                            p.hoplink__text  Earn commission for every customer you refer to this product using your personalized affiliate hoplink.
                                            form.hoplink-form.hoplink-mobile(data-productSlug-mobile=product.slug)
                                                .hoplink__body
                                                    input.hoplink__input.hoplink-username-mobile(type='text' value=`${user.username}` placeholder='Username' required)
                                                    p.hoplink__body--text Required
                                                //- .hoplink__body
                                                    input.hoplink__input.hoplink-trackingid-mobile(type='text' placeholder='Tracing Id')
                                                    p.hoplink__body--text Optional
                                                button.btn.hoplink__submit(type='submit') Generate Hoplink

                                
                    .hoplink__overlay.get__overlay.hidden
                    .hoplink__modal.get__modal.hidden
                        i.fa-solid.fa-close.icon.hoplink__icon
                        h2.dashboard__heading Generate HopLink
                        p.hoplink__text Earn commission for every customer you refer to this product using your personalized affiliate hoplink.
                        form.hoplink#hoplink
                            .hoplink__body
                                input.hoplink__input#hoplink-username(type='text' required='' value=`${user.username}` placeholder='Username')
                                p.hoplink__body--text Required
                            //- .hoplink__body
                                input.hoplink__input#hoplink-trackingid(type='text' placeholder='Tracing Id')
                                p.hoplink__body--text Optional
                            button.btn.hoplink__submit.submit(type='submit') Generate Hoplink


                .hoplink__overlay.copy__overlay.hidden
                    .hoplink__modal.copy__modal.hidden
                        h2.dashboard__heading Copy HopLink
                        p.hoplink__text Paste this URL into your promotional materials.
                        p.hoplink__copy https://clubmerce.com
                        
                        .flexible
                            button.btn.hoplink__submit.btnModalOk Ok
                            button.hoplink__copy-button.outline Copy
        

            //- .chat__box
                .chat-top
                    p.chat-name Idowu Olatunji
                    .chat-top__icons
                        i.fa-solid.fa-gear.chat-icon
                        i.fa-solid.fa-close.chat-icon
                .chat-mid
                    //- .chat-mid__from.main
                        .img-box
                            img.chat-img.from-img(src='asset/img/face.png' alt='')
                        .chat
                            p.chat-from__point
                                span ~&nbsp;
                                | Idowu Olatunji
                            p.chat-date 8:30
                            p.chat-from__message Lorem ipsum dolor sit amet consectetur adipisicing elit. Repellendus, illo?
                    //- .chat-mid__me.main
                        .img-box
                            img.chat-img.from-img(src='asset/img/avatar.png' alt='')
                        .chat
                            p.chat-me__point
                                span ~&nbsp;
                                | Me
                            p.chat-date 17:10
                            p.chat-me__message Lorem ipsum dolor sit amet consectetur adipisicing elit. Repellendus, illo?
                .chat-end
                    .chat-end__chat
                        form.chat__form
                            input.chat-end__input(type='text' placeholder='Type your message')
                            button.chat__button(type='submit')
                                i.fa-solid.fa-arrow-right.chat-icon
                    .chat-end__controls
                        i.fa-solid.fa-paperclip.chat-icon
                        i.fa-regular.fa-face-smile.chat-icon

            .chat__box
                .chat-head
                    i.fa-solid.fa-arrow-left.btn-back 
                    p.chat-person From Admin
                    span.close-btn.material-symbols-outlined close
                //- .chat-head-chat
                    p.chat-heading Chats ✉
                    span.close-btn.material-symbols-outlined close
                ul.chat__box--chat
                    li.chat.incoming
                        p Coming Soon...
                .chat-input
                    textarea(placeholder='Enter a message...' spellcheck='false' required='')
                    span#send-btn.material-symbols-rounded send

            .back-to-top
                i.fa-solid.fa-top-arrow
        
            
            include _auth_footer
